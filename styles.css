/* Base styles */
*{ box-sizing:border-box; }
:root{ --bg1:#ffafbd; --bg2:#ffc3a0; --btn:#ff6b6b; --btnHover:#ff8787; --card: rgba(255,255,255,0.82); --shadow: 0 20px 60px rgba(0,0,0,0.18); }
body{ margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif; min-height:100vh; background: linear-gradient(135deg,var(--bg1),var(--bg2)); color:#222; overflow-x:hidden; }
.hidden{ display:none !important; }
.container{ max-width: 920px; margin: 0 auto; padding: 90px 16px 60px; text-align:center; }
.title{ font-size: 40px; margin: 0 0 22px; }

/* Intro & Passcode */
.intro-overlay{ position: fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index: 10000; background: linear-gradient(135deg,var(--bg1),var(--bg2)); }
.intro-card{ width: min(420px, 92vw); background: rgba(255,255,255,0.9); padding: 24px; border-radius: 22px; box-shadow: 0 30px 80px rgba(0,0,0,0.25); display: flex; flex-direction: column; align-items: center; }
.intro-photo-couple{ width: 190px; height: 190px; object-fit: cover; border-radius: 22px; border: 5px solid #fff; box-shadow: 0 18px 45px rgba(0,0,0,0.25); margin-bottom: 12px; }
.intro-title{ margin: 14px 0 6px; }
.intro-subtitle{ margin: 0 0 14px; opacity: 0.8; }
.intro-hint{ margin: 10px 0 0; opacity:0.7; font-size: 13px; }
#passcodeControl { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 10px; }
#passcodeInput { padding: 12px; border-radius: 12px; border: 2px solid #ddd; font-size: 16px; width: 70%; outline: none; text-align: center; transition: 0.2s; }
#passcodeInput:focus { border-color: var(--btn); }
.passcode-error { color: #ff3b3b; font-weight: 900; margin-top: 5px; font-size: 14px; }
.error-shake { animation: shakeAnim 0.3s ease-in-out; border-color: #ff3b3b !important; }

/* UI Elements */
.top-controls{ position: fixed; top: 14px; right: 14px; display:flex; gap: 10px; z-index: 11000; }
.chip{ padding: 10px 14px; border-radius: 999px; border: 0; cursor:pointer; background: rgba(255,255,255,0.72); backdrop-filter: blur(10px); box-shadow: 0 10px 30px rgba(0,0,0,0.12); font-weight: 900; }
.question-section{ background: var(--card); padding: 24px; border-radius: 22px; box-shadow: var(--shadow); margin: 18px auto 0; width: min(780px, 92vw); max-width: 100%; }
.question-text{ font-size: 22px; margin: 0 0 18px; }
.btn{ border: 0; border-radius: 14px; padding: 14px 20px; font-size: 16px; font-weight: 900; cursor: pointer; transition: transform .15s ease, background .15s ease; }
.btn:hover{ transform: translateY(-2px); }
.btn-yes{ background: var(--btn); color:#fff; }
.btn-yes:hover{ background: var(--btnHover); }
.btn-no{ background:#efefef; color:#111; }
.btn-next, .btn-secret{ background: var(--btn); color:#fff; margin-top: 12px; }
.btn-next:hover, .btn-secret:hover{ background: var(--btnHover); }
.btn-row{ display:flex; gap: 14px; justify-content:center; flex-wrap:wrap; }
.system-warning{ margin-top: 14px; padding: 12px 14px; border-radius: 14px; font-weight: 900; background: rgba(255, 77, 77, 0.18); border: 1px solid rgba(255, 77, 77, 0.35); color: #ff3b3b; }

/* Features */
.meter-wrap{ margin-top: 8px; }
.meter-header{ display:flex; justify-content:space-between; font-weight: 900; margin-bottom: 8px; }
.meter-slider-wrap{ width: 100%; overflow: visible; }
.love-meter{ width: 100%; }
.extra-love{ margin-top: 10px; font-weight: 900; }
.super-love{ font-size: 20px; }
.smart-reaction{ margin-top: 10px; font-size: 18px; font-weight: 900; opacity: 0.9; }
.floating-elements{ position: fixed; inset: 0; pointer-events:none; overflow:hidden; z-index: 0; }
.heart, .bear{ position:absolute; font-size: 24px; opacity: 0.8; animation: floatUp linear infinite; }
@keyframes floatUp{ from{ transform: translateY(110vh); } to{ transform: translateY(-10vh); } }

/* Modals & Overlays */
.chat-sim{ position: fixed; inset: 0; display:flex; align-items:center; justify-content:center; z-index: 12000; padding: 20px; background: rgba(0,0,0,0.15); backdrop-filter: blur(8px); }
.chat-card{ width: min(460px, 92vw); background: rgba(255,255,255,0.92); padding: 18px; border-radius: 22px; box-shadow: 0 20px 60px rgba(0,0,0,0.22); text-align:left; }
.chat-header{ font-weight: 950; text-align:center; margin-bottom: 10px; }
.chat-line{ margin: 8px 0; font-weight: 900; }
.call-screen{ position: fixed; inset:0; z-index: 13000; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,0.25); backdrop-filter: blur(10px); padding: 18px; }
.call-card{ width: min(420px, 92vw); background: rgba(20,20,24,0.92); color:#fff; padding: 24px; border-radius: 26px; box-shadow: 0 30px 90px rgba(0,0,0,0.35); text-align:center; }
.call-avatar{ font-size: 56px; margin-bottom: 10px; }
.call-name{ font-size: 28px; font-weight: 950; }
.call-status{ opacity: .85; margin-top: 6px; font-weight: 800; }
.call-actions{ margin-top: 18px; display:flex; justify-content:center; gap: 14px; }
.call-hint{ margin-top: 12px; opacity: .8; font-weight: 800; }
.captcha-box{ width: 100%; margin: 0 auto; display:flex; flex-direction:column; gap: 12px; align-items: stretch; }
.captcha-title{ font-weight: 950; margin-bottom: 0; text-align:center; font-size: 18px; }
.captcha-row{ display:flex; align-items:center; justify-content:center; gap: 12px; padding: 14px 14px; border-radius: 14px; background: rgba(255,255,255,0.55); backdrop-filter: blur(10px); font-weight: 900; text-align: left; }
.captcha-row input{ width: 24px; height: 24px; flex-shrink: 0; margin: 0; }
.captcha-row span { font-size: 16px; line-height: 1.3; }
.captcha-btn{ width: 100%; }
.captcha-msg{ text-align:center; font-weight: 900; color: #ff3b3b; }
.scan-title{ margin: 0 0 14px; }
.scan-bar{ width: 100%; height: 18px; background: #eee; border-radius: 999px; overflow:hidden; }
#scanFill{ height: 100%; width: 0%; background: var(--btn); transition: width .18s linear; }
.scan-text{ margin-top: 10px; font-weight: 900; }
.ai-box{ margin: 10px auto 14px; width: 100%; background: rgba(0,0,0,0.08); padding: 16px; border-radius: 16px; text-align:left; font-weight: 900; white-space: pre-wrap; word-wrap: break-word; overflow-wrap: break-word; word-break: break-word; font-size: 14px; line-height: 1.5; }
.celebrate-title{ font-size: 30px; margin: 0; }
.celebrate-msg{ font-size: 20px; margin: 12px 0; min-height: 54px; }
.celebrate-emojis{ font-size: 28px; }
.celebrate-actions{ display:flex; justify-content:center; gap: 12px; flex-wrap: wrap; margin-top: 10px; }
.timeline{ width: min(780px, 92vw); margin: 18px auto 0; background: var(--card); padding: 24px; border-radius: 22px; box-shadow: var(--shadow); text-align:left; }
.timeline-title{ text-align:center; margin-top: 0; }
.tl-item{ margin: 12px 0; font-size: 18px; font-weight: 800; }
.future-wrap{ margin-top: 18px; padding-top: 14px; border-top: 1px solid rgba(0,0,0,0.08); }
.future-title{ font-weight: 950; margin-bottom: 10px; }
.future-one{ margin-top: 12px; padding: 12px 14px; border-radius: 14px; background: rgba(255,255,255,0.55); font-weight: 900; }
.extras{ width: min(920px, 92vw); margin: 18px auto 0; background: var(--card); padding: 24px; border-radius: 22px; box-shadow: var(--shadow); text-align:center; }
.extras-grid{ display:grid; grid-template-columns: 1fr; gap: 14px; margin-top: 10px; }
@media (min-width: 860px){ .extras-grid{ grid-template-columns: 1fr 1fr; } .extra-wide{ grid-column: 1 / -1; } }
.extra-card{ background: rgba(255,255,255,0.55); border-radius: 18px; padding: 16px; text-align:left; }
.extra-title{ font-weight: 950; margin-bottom: 10px; }
.extra-text{ font-weight: 900; opacity: 0.9; margin-bottom: 10px; }
.hug-count{ font-weight: 950; font-size: 18px; margin-bottom: 6px; }
.promise-wall{ display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 10px; }
@media (min-width: 860px){ .promise-wall{ grid-template-columns: repeat(4, minmax(0, 1fr)); } }
.promise-tile{ padding: 12px; border-radius: 16px; background: rgba(255,255,255,0.7); font-weight: 900; cursor: pointer; transition: transform .15s ease; user-select: none; }
.promise-tile:hover{ transform: translateY(-2px); }
.promise-tile.done{ background: rgba(255, 107, 107, 0.18); border: 1px solid rgba(255, 107, 107, 0.35); }

/* --- NEW FEATURES --- */
.version-badge { position: fixed; bottom: 8px; right: 8px; background: rgba(0,0,0,0.4); color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 10px; font-family: monospace; z-index: 30000; cursor: pointer; pointer-events: auto; user-select: none; }
.prank-overlay { position: fixed; inset: 0; background: #000; z-index: 25000; display: flex; align-items: center; justify-content: center; color: red; text-align: center; }
.prank-content { display: flex; flex-direction: column; align-items: center; gap: 20px; animation: shakeAnim 0.1s infinite; }
.prank-img { width: 300px; height: 300px; object-fit: cover; border-radius: 50%; border: 10px solid red; }
.prank-title { font-size: 50px; margin: 0; }
.prank-msg { font-size: 24px; color: #fff; font-weight: bold; }
.contract-text { text-align: left; background: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; height: 200px; overflow-y: auto; margin-bottom: 10px; border: 1px solid #ddd; font-family: monospace; }
.game-overlay, .certificate-overlay, .coupons-overlay { position: fixed; inset: 0; z-index: 21000; background: rgba(0,0,0,0.85); display:flex; flex-direction:column; align-items: center; justify-content: center; }
.game-ui { padding: 20px; background: #fff; text-align: center; border-bottom: 2px solid #ddd; display:flex; flex-direction:column; gap:8px; align-items:center; width: 100%; }
.game-score{ font-weight: 900; font-size: 20px; }
.game-msg{ font-weight: bold; color: var(--btn); }
.game-area{ flex: 1; width: 100%; position: relative; overflow: hidden; cursor: crosshair; }
.game-heart-item{ position: absolute; font-size: 60px; user-select: none; cursor: pointer; animation: fallDown 4s linear forwards; padding: 15px; z-index: 21001; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); }
@keyframes fallDown{ from{top:-80px;} to{top:110%;} }
.certificate-frame{ background: #fff; padding: 40px; border: 8px double #d4af37; text-align: center; width: min(600px, 90vw); border-radius: 4px; box-shadow: 0 0 50px rgba(255, 215, 0, 0.5); color: #222; }
.cert-header{ font-size: 28px; font-weight: 900; color: #d4af37; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 2px; }
.cert-body{ font-size: 20px; line-height: 1.6; margin-bottom: 30px; font-style: italic; font-family: "Georgia", serif; }
.cert-sign, .cert-date{ font-size: 18px; font-weight: bold; margin-top: 10px; font-family: monospace; }
.coupons-card{ background: #fff; width: min(500px, 94vw); padding: 24px; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); text-align: center; max-height: 80vh; overflow-y: auto; color: #222; }
.coupons-grid{ display: flex; flex-direction: column; gap: 12px; }
.coupon-ticket{ border: 2px dashed #ccc; padding: 14px; border-radius: 12px; background: #fdfdfd; cursor: pointer; transition: 0.2s; text-align: left; color: #222; }
.coupon-ticket:hover{ background: #fff5f5; border-color: var(--btn); }
.coupon-ticket.redeemed{ background: #fff9c4; border: 2px solid #ffd700; box-shadow: 0 4px 10px rgba(255, 215, 0, 0.3); opacity: 1; text-decoration: none; transform: scale(1.02); color: #444; }
.coupon-title{ font-weight: 900; font-size: 16px; margin-bottom: 4px; }
.coupon-desc{ font-size: 13px; opacity: 0.7; }
.lock-screen{ position: fixed; inset: 0; z-index: 20000; background: #000; color: #fff; display:flex; align-items:center; justify-content:center; text-align:center; font-size: 34px; padding: 20px; }
.fireworks-canvas{ position: fixed; inset: 0; pointer-events:none; z-index: 9998; }
.flash-overlay{ position: fixed; inset: 0; background: #fff; z-index: 19999; opacity: 0; }
.flash-overlay.flash{ animation: flashAnim .35s ease-out; }
@keyframes flashAnim{ 0%{ opacity: 0; } 30%{ opacity: 1; } 100%{ opacity: 0; } }
body.shake{ animation: shakeAnim .25s ease-in-out; }
@keyframes shakeAnim{ 0%{ transform: translateX(0); } 25%{ transform: translateX(-6px); } 50%{ transform: translateX(6px); } 75%{ transform: translateX(-4px); } 100%{ transform: translateX(0); } }
.lie-detector{ position: fixed; inset: 0; z-index: 15000; display:flex; align-items:center; justify-content:center; padding: 18px; background: rgba(0,0,0,0.25); backdrop-filter: blur(10px); }
.lie-card{ width: min(520px, 92vw); background: rgba(20,20,24,0.92); color:#fff; border-radius: 22px; padding: 18px; box-shadow: 0 30px 90px rgba(0,0,0,0.35); text-align:center; }
.lie-title{ font-weight: 950; font-size: 20px; }
.lie-sub{ margin-top: 8px; opacity: .9; font-weight: 900; }
.ecg{ margin: 14px auto; width: 100%; height: 54px; border-radius: 14px; background: rgba(255,255,255,0.08); overflow: hidden; position: relative; }
.ecg-line{ position:absolute; inset: 0; background: linear-gradient(90deg, transparent 0%, transparent 35%, rgba(255,255,255,0.85) 36%, transparent 37%, transparent 100%); animation: ecgMove 0.6s linear infinite; }
@keyframes ecgMove{ from{ transform: translateX(-40%); } to{ transform: translateX(40%); } }
.lie-result{ font-weight: 950; margin-top: 10px; }
.no-bounce{ animation: noBounce .6s ease-in-out infinite; }
@keyframes noBounce{ 0%{ transform: translateY(0) rotate(0deg); } 25%{ transform: translateY(-5px) rotate(-2deg); } 50%{ transform: translateY(0) rotate(2deg); } 75%{ transform: translateY(-4px) rotate(-1deg); } 100%{ transform: translateY(0) rotate(0deg); } }
@media (max-width: 520px){ .title{ font-size: 28px; } .question-text{ font-size: 18px; } .intro-photo-couple{ width: 150px; height: 150px; } .lock-screen{ font-size: 26px; } .question-section { padding: 16px; width: 94vw; } .ai-box { font-size: 12px; padding: 12px; margin: 8px 0; } .captcha-row { padding: 12px; } .captcha-row span { font-size: 14px; } .certificate-frame { padding: 20px; border-width: 4px; } .cert-header { font-size: 20px; } .cert-body { font-size: 16px; } .prank-img { width: 200px; height: 200px; } .prank-title { font-size: 30px; } }
/* Dark Mode Fixes */
body.skincare{ background: radial-gradient(circle at top, #2b2b35, #121218); color: #f2f2f2; }
body.skincare .question-section, body.skincare .timeline, body.skincare .extras, body.skincare .intro-card{ background: rgba(20,20,24,0.85); color: #f2f2f2; }
body.skincare .chip{ background: rgba(30,30,40,0.8); color: #fff; }
body.skincare .btn-no{ background: #333; color: #eee; }
body.skincare .chat-card{ background: rgba(20,20,24,0.9); color: #f2f2f2; }
body.skincare .scan-bar{ background: rgba(255,255,255,0.15); }
body.skincare .captcha-row, body.skincare .future-one, body.skincare .extra-card, body.skincare .promise-tile{ background: rgba(255,255,255,0.08); color: #f2f2f2; }
body.skincare .coupons-card, body.skincare .game-ui, body.skincare .certificate-frame { background: #1e1e24; color: #f2f2f2; border-color: #444; }
body.skincare .coupon-ticket { background: rgba(255,255,255,0.05); border-color: #555; color: #ccc; }
body.skincare .coupon-ticket:hover { background: rgba(255,255,255,0.1); }
body.skincare .coupon-ticket.redeemed { background: #ffd700; color: #222; border-color: #daa520; }
body.skincare .certificate-frame { background-image: none; box-shadow: 0 0 40px rgba(212, 175, 55, 0.2); }
